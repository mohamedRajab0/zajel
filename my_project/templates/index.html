{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <title>Zajel</title>
        <link rel="stylesheet" href="{% static "css/main.css" %}">
    </head>
    <body>
        <header>
            <div class="user">
            <img src="{% static 'images/user.png' %}" alt="User">
            <p>{{ user.username }}</p>
            </div>

            <nav>
            <a href="#"><span><img src="{% static 'imgs/Icon/Outline/grid.svg' %}" alt=""></span>
                <span>Home</span></a>
                    <a href="#">
                    <span><img src="{% static 'imgs/Icon/Fill/message-circle.svg' %}" alt="">
                    </span><span>Chat</span></a>
                   
                <a href="#">
                    <span><img src="{% static 'imgs/Icon/Outline/person.svg' %}" alt=""></span>
                    <span>Content</span></a>
                <a href="#"><span><img src="{% static 'imgs/Icon/Outline/bell.svg' %}" alt=""></span>
                    <span>Nofiction</span></a>
                <a href="#">
                    <span><img src="{% static 'imgs/Icon/Outline/settings-2.svg' %}" alt=""> </span> 
                   <span> Setting</span></a>
            </nav>
        </header>
        <article>
            <h1><img src="{% static 'imgs/logo' %}">Zajel Chat</h1>
            <hr>
            <div class="chat-box">
                <div class="chat-header">
                    <span><img src="imgs/R.png" alt=""></span>
                    <span>User name</span>
                </div>
                <div class="chat-body">
                    <div class="message">
                        <div class="received-message"></div>
                            <p>Received message 1</p>
                        </div>
                        <div class="sent-message">
                            <p>Sent message 1</p>
                        </div>
                        <div class="received-message">
                            <p>Received message 2</p>
                        </div>
                        <div class="sent-message">
                            <p>Sent message 2</p>
                        </div>
                        {% for message in messages %}
                        {{ message.author }}: {{ user.username}}
                        <hr>
                        {% if message.author == user.username %} <span> You: </span>
                        <p> {{ message.body }} {{ message.date }} </p>
                        {% else %} <span> {{ message.author }}: </span>
                        <p> {{ message.body }} {{ message.date }} </p>
                        {% endif %}
                        {% endfor %}
                        <!-- Add more received and sent messages here -->
                         <form action='/' method='post'>
                            {% csrf_token %}
                            {{ form }}
                            <button type='submit'>Send</button>
                            </form>
                    </div>
                </div>
            </div>
        </article>
        <scrpit type="text/javascript">
            let url = `ws://'+window.location.host+'/ws/chat/socket-server`
            const chatSocket = new WebSocket(url)
            chatSocket.onmessage = function(e){
                const data = JSON.parse(e.data)
                console.log(data)
            }
        </scrpit>
    </body>
</html>